<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,minimal-ui" />
	<meta charset="UTF-8">
	<title>定时开关机设置</title>
	<link rel="stylesheet" href="__PUBLIC__/Home/css/resetstyle.css">
	<link rel="stylesheet" href="__PUBLIC__/Home/fonts/iconfont.css">
	<script src="__PUBLIC__/Home/js/jquery-1.10.1.js"></script>
	<script src="__PUBLIC__/Admin/js/plugins/layer/layer.min.js"></script>
	<script src="__PUBLIC__/Home/js/public.js"></script>
	<link href="__PUBLIC__/Admin/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
	<script src="__PUBLIC__/Admin/js/plugins/sweetalert/sweetalert.min.js"></script>
	<style>
		body{
				font-size: 0.8rem;
				color:#373737;
			}
		.switchTop{
			width: 100%;
			/*border-bottom:0.4rem solid #ECECEC;*/
		}
		.swContain{ 
			width: 100%;
			padding:0.533333rem auto 0;
			padding-bottom:1.5rem;
		}
		.swContain p{
			padding: 0.2rem 0 0.266667rem 0.5rem;
			font-size: 0.8rem;
			line-height: 2.666667rem;
		}
		.inputTime{
			width: 100%;
			height: 1.6rem;
			border-top:1px solid #ECECEC;
			border-bottom:1px solid #ECECEC;
			text-align: center;
			margin: 2.0rem 0 1.0rem;
		}
		.inputTime input{
			width: 40%;
			margin: 0 auto;
			height: 1.6rem;
			border:none;
			text-align: center;
			letter-spacing: 0.133333rem;
			padding-left: 0.4rem;
			margin-left: 3rem;
			background: #fff;
		}
		.switchFoot{
			height: 4.0rem;
			margin: 0 auto;
			position: relative;
			width: 86vw;
		}	
		.switchFoot input{
			width:100%;
			height: 2.133333rem;
			padding:0.2rem 0;
			position: absolute;
			bottom: 0;
			border:none;
			border-radius: 0.2rem;
			background: #2EB6AA;
			/*background: #fff;*/
			color:#fff;
			font-size: 0.82rem;
			letter-spacing: 0.1rem;

		}
		/*兼容性*/
		@media screen and (max-height:520px) {
				.inputTime {
	   				 margin: 1rem 0 1rem;
				}
		}
		.action_type,.time_type{
			display: flex;
           -webkit-justify-content: center; 
           -moz-justify-content: center; 

		}
		.time_type{
			margin: 2rem auto;
		}
		.action_type>span,.time_type>span{
			display: inline-block;
			padding:0.2rem 0.3rem;
			text-align: center;
			color: #373737;
			background: #FFF;
			margin:0rem 0.3rem;
			border-radius: 0.2rem;
			border:1px solid #f1f1f1;
		}
		span.checked{
			color: #fff;
			background: #2EB6AA;
			border:1px solid #2EB6AA;
		}



	</style>
</head>
<body>
	<div class="switchAll">
		<div class="switchTop">
			<div class="swContain">
				<p>时间设置：(时/分)</p>
				<div class="inputTime open"><input type="time" name="time" value="00:00" class="setdata"></div>
			</div>
		</div>
		<div class="action_type">
			<span class="checked" alt="0">开机</span><span alt="1">关机</span><span alt="2">开启加热</span><span alt="3">关闭加热</span>
		</div>	
		<div class="time_type">
			<span class="checked" alt="0">一次</span><span alt="1">每天</span>
		</div>	
		<div class="switchFoot">
			<input type="button" value="保存" id="save">
		</div>
	</div>
	<script>

		$('.action_type>span').click(function (){
			$('.action_type>span').removeClass('checked');
			$(this).addClass('checked');
		});

		$('.time_type>span').click(function (){
			$('.time_type>span').removeClass('checked');
			$(this).addClass('checked');
		});

		$("#save").click(function(){
			// 获取表单数据
        	var time = $('input[name="time"]').val();
        	var action_type = $('.action_type>span.checked').attr('alt');
        	var time_type = $('.time_type>span.checked').attr('alt');
        	console.dir(time)
        	console.dir(action_type)
        	console.dir(time_type)
	        $.ajax({
	            url:"{{:U('Home/Task/set_time')}}",
	            data:{time:time,type:action_type,repeat:time_type},
	            dataType:"json",
	            type: 'post',
	            success:function(res){
	                // console.dir(res);
	                if(res.code == 200){
	                    // 添加成功
	                    swal(res.msg,res.msg, "success");
	                    // 两秒后刷新
	                    // setTimeout(function(){
	                    //     window.location.reload();
	                    // },1000);
	                }else{
	                    // 添加失败
	                    swal(res.msg, "请重新提交！", "success");
	                }
	            }
	        });
		})

        
        //  异步请求

	</script>
</body>
</html>                                                                                                                                                                                                                                                                      	