<extend name="Public/base" />
<block name="mylink">
    <link href="__PUBLIC__/Admin/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <link href="__PUBLIC__/Admin/css/switchery.min.css" rel="stylesheet">
</block>
<block name="content">
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                    <h5>时长套餐管理 <small>添加套餐</small></h5>
                </div>
                    <div class="ibox-content">
                        <form action="javascript: return false;" method="post" class="form-horizontal" enctype="multipart/form-data" id="form">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">产品类型</label>
                                <div class="col-md-3">
                                    <select name="tid" class="form-control" name="account">
                                        <volist name="list" id="v">
                                        <option value="{{$v.id}}">{{$v.typename}}</option>
                                    </volist>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">套餐金额</label>
                                <div class="col-md-3">
                                    <input type="text" name="money" class="form-control" placeholder="标准价钱格式，例如：2.00">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-2 control-label">会员金币奖励</label>
                                <div class="col-md-3">
                                    <input type="text" name="gold_users" class="form-control" placeholder="标准价钱格式，例如：2.00">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">会员银币奖励</label>
                                <div class="col-md-3">
                                    <input type="text" name="silver_users" class="form-control" placeholder="标准价钱格式，例如：2.00">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">会员邀请人金币奖励</label>
                                <div class="col-md-3">
                                    <input type="text" name="gold_inviter" class="form-control" placeholder="标准价钱格式，例如：2.00">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">会员邀请人银币奖励</label>
                                <div class="col-md-3">
                                    <input type="text" name="silver_inviter" class="form-control" placeholder="标准价钱格式，例如：2">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">套餐量
                                </label>

                                <div class="col-sm-10">
                                    <div class="radio i-checks col-sm-1" style="width: 150px;">
                                        <label>
                                            <input type="radio" checked="" value="0" name="remodel"> <i></i> 天数</label>
                                    </div>
                                    <div class="radio i-checks col-sm-1" style="width: 150px;">
                                        <label>
                                            <input type="radio" value="1" name="remodel"> <i></i> 流量</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">奖励
                                </label>

                                <div class="col-sm-10">
                                    <div class="radio i-checks col-sm-1" style="width: 150px;">
                                        <label>
                                            <input type="radio" checked="" value="1" name="status"> <i></i> 开启</label>
                                    </div>
                                    <div class="radio i-checks col-sm-1" style="width: 150px;">
                                        <label>
                                            <input type="radio" value="2" name="status"> <i></i> 未开启</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label"></label>
                                <div class="col-md-3">
                                    <input type="text" name="flow" class="form-control" placeholder="套餐量">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">套餐描述</label>
                                <div class="col-md-3">
                                    <input type="text" name="describe" class="form-control"  placeholder="套餐简要描述50个字以内">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <div class="col-sm-4 col-sm-offset-2">
                                    <button class="btn btn-primary" type="submit">添加</button>
                                    <button class="btn btn-white" type="reset">重置</button>
                                </div>
                            </div>
                        </form>
                    </div>             
                </div>
            </div>
        </div>
    </div>
</block>
<block name="myjs">
<script src="__PUBLIC__/Admin/layui/layui.js"></script>
<script src="__PUBLIC__/Admin/js/plugins/sweetalert/sweetalert.min.js"></script>
<script src="__PUBLIC__/Admin/js/switchery.min.js"></script>
    <!-- iCheck -->
    <script src="__PUBLIC__/Admin/js/plugins/iCheck/icheck.min.js"></script>
<script>
    $(document).ready(function () {
        $('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });
    });
    /**
     * [获取表单数据]
     * @param  {[type]} )
     * @return {[type]}     [description]
     */
    $('.btn-primary').click(function(){
        // 获取表单数据
        var data = {
            'tid' : $("select option:selected").val(),
            'money' : $("input[name=money]").val(),
            'describe' : $("input[name=describe]").val(),
            'remodel' : $("input:checked").val(),
            'flow' : $("input[name=flow]").val(),
            'gold_users' : $("input[name=gold_users]").val(),
            'silver_users' : $("input[name=silver_users]").val(),
            'gold_inviter' : $("input[name=gold_inviter]").val(),
            'silver_inviter' : $("input[name=silver_inviter]").val(),
            'status' : $("input[name='status']:checked").val()
        };
        // console.dir(data);
        //  异不请求
        $.ajax({
            url:"{{:U('Admin/setmeal/add')}}",
            data:data,
            dataType:"json",
            type: 'post',
            success:function(res){
                if(res.code == 200){
                    // 添加成功
                    parent.layer.msg(res.msg);
                    window.location.href="{{:U('/Admin/setmeal/index')}}";
                }else{
                    // 添加失败
                    parent.layer.msg(res.msg);
                }
            },
            error: function(res) {
                console.log(res)
            }
        });
        

    });

</script>
</block>